{"version":3,"sources":["webpack:///./src/views/my-cards.vue?1a71","webpack:///src/views/my-cards.vue","webpack:///./src/views/my-cards.vue?3e79","webpack:///./src/views/my-cards.vue","webpack:///./src/views/my-cards.vue?8110"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","cardsList","_l","item","index","key","style","on","click","$event","handleToDetail","_v","_s","city","cardName","handleToBuy","DATASOURCE","linksObj","staticRenderFns","my_cardsvue_type_script_lang_js_","name","data","cityCardImgList","created","_created","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","arr","i","j","wrap","_context","prev","next","window","service","sent","t0","console","log","toast","abrupt","code","length","cityCorn","fullCardImage","img","msg","stop","apply","arguments","mounted","setShare","methods","$router","push","path","query","id","materialId","moudle","sendPoint","type","_this","setTimeout","location","href","buyCardLink","shareData","shareObj","optObj","moreItem","share_img","share_url","share_title","share_subtitle","channels","JPFESDK","clickId","moduleId","pageId","utils","views_my_cardsvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_my_cards_vue_vue_type_style_index_0_id_2f326a7c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_my_cards_vue_vue_type_style_index_0_id_2f326a7c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"static/js/chunk-13c4d436.14c92481.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-cards-container\"},[(_vm.cardsList.length)?_c('div',[_c('div',{staticClass:\"cards-list\"},_vm._l((_vm.cardsList),function(item,index){return _c('div',{key:index,staticClass:\"card-item\",style:((\"background-image: url(\" + (item.fullCardImage) + \")\")),on:{\"click\":function($event){return _vm.handleToDetail(item)}}},[_c('div',{staticClass:\"item-city\"},[_vm._v(_vm._s(item.city))]),_c('div',{staticClass:\"item-corner\"},[_vm._v(_vm._s(item.cardName))])])}),0),_c('div',{staticClass:\"buy-link\",on:{\"click\":function($event){return _vm.handleToBuy(1)}}},[_vm._v(\"点击查看更多出行权益>>\")])]):_c('div',[_c('div',{staticClass:\"no-card-box\"}),_c('p',{staticClass:\"no-card-text\"},[_vm._v(\"暂无可使用的出行权益\")]),_c('p',{staticClass:\"right-text\"},[_vm._v(\"出行权益\")]),_c('div',{staticClass:\"right-banner\",style:((\"background-image: url(\" + (_vm.DATASOURCE.linksObj.buyCardImg) + \")\")),on:{\"click\":function($event){return _vm.handleToBuy(2)}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"my-cards-container\">\n    <div v-if=\"cardsList.length\">\n      <div class=\"cards-list\">\n        <div\n          class=\"card-item\"\n          v-for=\"(item, index) in cardsList\"\n          :key=\"index\"\n          :style=\"`background-image: url(${item.fullCardImage})`\"\n          @click=\"handleToDetail(item)\"\n        >\n          <div class=\"item-city\">{{ item.city }}</div>\n          <div class=\"item-corner\">{{ item.cardName }}</div>\n        </div>\n      </div>\n      <div class=\"buy-link\" @click=\"handleToBuy(1)\">点击查看更多出行权益>></div>\n    </div>\n    <div v-else>\n      <div class=\"no-card-box\"></div>\n      <p class=\"no-card-text\">暂无可使用的出行权益</p>\n      <p class=\"right-text\">出行权益</p>\n      <div\n        class=\"right-banner\"\n        :style=\"`background-image: url(${DATASOURCE.linksObj.buyCardImg})`\"\n        @click=\"handleToBuy(2)\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Fetoast from 'components/toast/index.js'\nimport { sendPointFn } from '../utils/utils'\nimport {\n  apiQueryCardsList\n} from 'api/service'\n\nexport default {\n  name: 'my-cards',\n\n  data () {\n    return {\n      DATASOURCE: {}, // 配置平台获取数据\n      cityCardImgList: [], // 配置平台城市卡面列表\n      cardsList: [] // 我的卡列表\n    }\n  },\n\n  async created () {\n    this.DATASOURCE = window.DATASOURCE\n    this.cityCardImgList = this.DATASOURCE.cityCardImgList // 从配置平台获取数据\n\n    let res = {}\n    try {\n      res = await apiQueryCardsList()\n    } catch (e) {\n      console.log(e)\n      Fetoast('获取数据异常')\n      return false\n    }\n\n    // TODO MOCKDATA\n    // res = {\n    //   'code': 'F_000000',\n    //   'data': [\n    //     {\n    //       'bizType': '123',\n    //       'cardId': '2018102916550012',\n    //       'cardImage': 'https://m.360buyimg.com/babel/jfs/t1/1703/27/12113/99861/5bd27cabE17eb3c27/c26ebeaeeee49f4f.jpg',\n    //       'cardName': '襄阳地铁',\n    //       'cardType': 'subway',\n    //       'city': '北京',\n    //       'cityCorn': 'hangzhou',\n    //       'endTime': '2018-11-29 23:59:59',\n    //       'materialId': '00215408858889561',\n    //       'moudle': '123',\n    //       'startTime': '2018-10-30 19:30:13',\n    //       'subTitle': '襄阳地铁',\n    //       'title': '襄阳地铁',\n    //       'residueTime': '30'\n    //     },\n    //     {\n    //       'bizType': '123',\n    //       'cardId': '2018102916550012',\n    //       'cardImage': 'https://m.360buyimg.com/babel/jfs/t1/1703/27/12113/99861/5bd27cabE17eb3c27/c26ebeaeeee49f4f.jpg',\n    //       'cardName': '襄阳地铁',\n    //       'cardType': 'subway',\n    //       'city': '杭州',\n    //       'cityCorn': 'hangzhou',\n    //       'endTime': '2018-11-29 23:59:59',\n    //       'materialId': '00215408858889561',\n    //       'moudle': '123',\n    //       'startTime': '2018-10-30 19:30:13',\n    //       'subTitle': '襄阳地铁',\n    //       'title': '襄阳地铁',\n    //       'residueTime': '30'\n    //     },\n    //     {\n    //       'bizType': '123',\n    //       'cardId': '2018102916550012',\n    //       'cardImage': 'https://m.360buyimg.com/babel/jfs/t1/1703/27/12113/99861/5bd27cabE17eb3c27/c26ebeaeeee49f4f.jpg',\n    //       'cardName': '襄阳地铁',\n    //       'cardType': 'subway',\n    //       'city': '杭州',\n    //       'cityCorn': 'hangzhou',\n    //       'endTime': '2018-11-29 23:59:59',\n    //       'materialId': '00215408858889561',\n    //       'moudle': '123',\n    //       'startTime': '2018-10-30 19:30:13',\n    //       'subTitle': '襄阳地铁',\n    //       'title': '襄阳地铁',\n    //       'residueTime': '30'\n    //     }\n    //   ],\n    //   'msg': '接口调用成功',\n    //   'success': true\n    // }\n\n    if (res.code === 'F_000000') {\n      if (res.data.length) { // 匹配城市卡面\n        let arr = res.data\n        for (let i = 0; i < arr.length; i++) {\n          for (let j = 0; j < this.cityCardImgList.length; j++) {\n            if (arr[i].cityCorn === this.cityCardImgList[j].city) {\n              arr[i].fullCardImage = this.cityCardImgList[j].img\n            }\n          }\n        }\n        this.cardsList = arr\n      } else {\n        this.cardsList = []\n      }\n    } else {\n      Fetoast(res.msg)\n    }\n  },\n  mounted () {\n    this.setShare()\n  },\n  methods: {\n    handleToDetail (item) { // 去详情\n      this.$router.push({\n        path: '/carddetail',\n        query: {\n          id: item.materialId,\n          moudle: item.moudle\n        }\n      })\n      this.sendPoint('detail', 'card')\n    },\n\n    handleToBuy (type) { // 去购买\n      setTimeout(() => {\n        window.location.href = this.DATASOURCE.linksObj.buyCardLink\n      }, 300)\n      this.sendPoint(type === 1 ? 'hasCard' : 'noCard', 'buy')\n    },\n    // 设置分享\n    setShare () {\n      // eslint-disable-next-line\n      const shareData = this.DATASOURCE.shareObj\n      let optObj = {\n        moreItem: true, // 非必传，Boolean类型，是否隐藏APP内的右上角分享,默认为true\n        share_img: shareData.share_img, // 分享图标\n        share_url: location.href, // 分享链接\n        share_title: '我的权益卡', // 分享标题\n        share_subtitle: shareData.share_subtitle, // 分享描述\n        channels: ['1', '2', '3', '4', '5'] // 必传，0-微信朋友圈，1-微信好友，2-新浪微博，3-短信，4-QQ好友，5-QQ空间 金融环境微博短信不可用,商城环境短信不可用\n      }\n      window.JPFESDK.setShare(optObj)\n    },\n    // 发送埋点数据\n    sendPoint (clickId, moduleId) {\n      console.log('clickId:', clickId)\n      const pageId = 'mycards'\n      clickId = clickId || 'default'\n      moduleId = moduleId || 'default'\n      sendPointFn(pageId, moduleId, clickId)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@mixin bg-img {\n    background-size: contain;\n    background-repeat: no-repeat;\n  }\n.my-cards-container {\n  width: 7.5rem;\n  min-height: 100vh;\n  position: relative;\n}\n.cards-list {\n  margin: .5rem auto 0;\n  .card-item {\n    margin: 0 auto .3rem;\n    width: 6.91rem;\n    height: 3.94rem;\n    position: relative;\n    border-radius: .1rem;\n    @include bg-img;\n    background-size: 100% 100%;\n    \n    .item-city {\n      height: .66rem;\n      margin: auto;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: .55rem;\n      font-size: .5rem;\n      line-height: .66rem;\n      color: #fff;\n    }\n    .item-corner {\n      padding: .05rem .15rem;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      font-size: .2rem;\n      color: #fff;\n      border-radius: .1rem 0 .1rem 0;\n      background-image: linear-gradient(to right bottom, #ffa942, #f14440);\n    }\n  }\n}\n.no-card-box {\n  margin: .93rem auto 0;\n  width: 4.72rem;\n  height: 3.18rem;\n  @include bg-img;\n  background-image: url(https://storage.jd.com/fe-traffic/images/no-card-bg.png);\n}\n.no-card-text {\n  margin: .4rem auto 0;\n  line-height: .3rem;\n  font-size: .3rem;\n  color: #999;\n  text-align: center;\n}\n.right-text {\n  margin: 2.11rem auto .37rem;\n  text-align: center;\n  font-size: .3rem;\n  color: #333;\n  position: relative;\n  &::before {\n    margin: auto;\n    content: '';\n    width: 2.42rem;\n    position: absolute;\n    left: .33rem;\n    top: 0;\n    bottom: 0;\n    height: 1px;\n    background-color: #dcdcdc;\n  }\n  &::after {\n    margin: auto;\n    content: '';\n    width: 2.42rem;\n    position: absolute;\n    right: .33rem;\n    top: 0;\n    bottom: 0;\n    height: 1px;\n    background-color: #dcdcdc;\n  }\n}\n.right-banner {\n  width: 6.9rem;\n  height: 1.6rem;\n  margin: 0 auto;\n  @include bg-img;\n}\n.buy-link {\n  display: block;\n  margin: 1rem auto;\n  font-size: .3rem;\n  text-align: center;\n  text-decoration: underline;\n  color: #fb7872;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-cards.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-cards.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./my-cards.vue?vue&type=template&id=2f326a7c&scoped=true&\"\nimport script from \"./my-cards.vue?vue&type=script&lang=js&\"\nexport * from \"./my-cards.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my-cards.vue?vue&type=style&index=0&id=2f326a7c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f326a7c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-cards.vue?vue&type=style&index=0&id=2f326a7c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-cards.vue?vue&type=style&index=0&id=2f326a7c&lang=scss&scoped=true&\""],"sourceRoot":""}