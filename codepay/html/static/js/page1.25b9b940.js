(function(t){function e(e){for(var i,o,r=e[0],c=e[1],u=e[2],d=0,p=[];d<r.length;d++)o=r[d],n[o]&&p.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={1:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/codepay/html/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([1,0]),s()})({1:function(t,e,s){t.exports=s("3zGw")},"285Y":function(t,e,s){"use strict";var i=s("WHHR"),n=s.n(i);n.a},"2sjv":function(t,e,s){},"3zGw":function(t,e,s){"use strict";s.r(e);s("yt8O"),s("VRzm");var i=s("Kw5r"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t.isLoading?i("div",{staticClass:"fullLoading"},[i("Loading",{attrs:{type:"spinner"}})],1):t._e(),t.isNewUser?i("div",{staticClass:"unOpen"},[i("div",{staticClass:"mainTxt"},[i("p",{staticClass:"line1"},[t._v("开通京东付款码")]),i("p",{staticClass:"line2"},[t._v("立即领取")]),i("img",{staticClass:"img_open",attrs:{id:"codepayOpen",src:s("MS/G"),clstag:"jr|keycount|mf0|open"},on:{click:function(e){t.fakeA("//pb.jd.com/activity/2018/kaitonglingquan50/html/index.html?p_id=mfyy","open","open")}}})]),t._m(0),i("div",{staticClass:"layer"})]):t._e(),i("div",{staticClass:"open"},[t._l(t.pageData,function(e,s){return["1"===e.display&&"mf_01"===e.frontType?i("div",{key:s},[i("div",{ref:"notice",refInFor:!0,staticClass:"noticeLine"},[i("span",{staticClass:"notice_icon"},[t._v("通知")]),i("div",{staticClass:"notice_txt"},[i("div",{ref:"noticeList",refInFor:!0,staticClass:"notice_list"},[t._l(t.noticeArr,function(e,s){return i("p",{key:s,staticClass:"notice_item"},[t._v(t._s(e))])}),i("p",{staticClass:"notice_item"},[t._v(t._s(t.noticeArr[0]))])],2)])]),i("swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.bannerArr,function(e,s){return i("swipe-item",{key:s},[i("img",{staticClass:"swipe_img",staticStyle:{width:"100%"},attrs:{src:e.imageUrl,clstag:"jr|keycount|mf_banner|"+e.id},on:{click:function(s){t.fakeA(e.jumpUrl,"banner",e.id)}}})])}))],1):t._e(),"1"===e.display&&"mf_02"===e.frontType?[i("div",{key:s,staticClass:"trackModule resourceBlock",attrs:{id:"resourceBlock","data-track-module":"icon"}},t._l(t.iconArr,function(e,s){return i("figure",{key:s,attrs:{clstag:"jr|keycount|mf_icon|"+e.id},on:{click:function(s){t.fakeA(e.jumpUrl,"icon",e.id)}}},[i("img",{attrs:{src:e.imageUrl}}),i("figcaption",[t._v(t._s(e.title))])])}))]:t._e(),"1"===e.display&&"mf_03"===e.frontType&&e.subModuleVos?[i("div",{key:s,staticClass:"singleImg",attrs:{clstag:"jr|keycount|mf_singleImg|"+e.subModuleVos[0]},on:{click:function(s){t.fakeA(e.subModuleVos[0].jumpUrl,"singleImg",e.subModuleVos[0].id)}}},[i("img",{attrs:{src:e.subModuleVos[0].imageUrl}})])]:t._e(),"1"===e.display&&"mf_04"===e.frontType?[i("div",{key:s,staticClass:"rectangle rectangle4"},[i("div",{staticClass:"titleLine"},[i("span",{staticClass:"title"},[t._v(t._s(e.moduleTitle))]),e.moduleUrl?i("span",{staticClass:"more",attrs:{clstag:"jr|keycount|mf_rectangle4|more"},on:{click:function(s){t.fakeA(e.moduleUrl,"rectangle4","moduleTitle")}}},[t._v(t._s(e.moduleSubTitle))]):t._e()]),i("ul",{staticClass:"content"},t._l(t.rct4Arr,function(e,s){return i("li",{key:s,attrs:{clstag:"jr|keycount|mf_rectangle4|"+e.id},on:{click:function(s){t.fakeA(e.jumpUrl,"rectangle4",e.id)}}},[i("span",{staticClass:"txt"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"desc"},t._l(e.textArr,function(e,s){return i("span",{key:s,class:0===e.status?"normal":"special"},[t._v(t._s(e.text))])}))]),i("span",{staticClass:"img"},[i("img",{attrs:{src:e.imageUrl}})])])}))])]:t._e(),"1"===e.display&&"mf_05"===e.frontType?[i("div",{key:s,staticClass:"rectangle rectangle3"},[i("div",{staticClass:"titleLine"},[i("span",{staticClass:"title"},[t._v(t._s(e.moduleTitle))]),e.moduleUrl?i("span",{staticClass:"more",attrs:{clstag:"jr|keycount|mf_rectangle3|more"},on:{click:function(s){t.fakeA(e.moduleUrl,"rectangle3","moduleTitle")}}},[t._v(t._s(e.moduleSubTitle))]):t._e()]),i("ul",{staticClass:"content",attrs:{"data-track-module":"rectangle3"}},t._l(t.rct3Arr,function(e,s){return i("li",{key:s,staticClass:"track",attrs:{clstag:"jr|keycount|mf_rectangle3|"+e.id},on:{click:function(s){t.fakeA(e.jumpUrl,"rectangle3",e.id)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"img"},[i("img",{attrs:{src:e.imageUrl}})])])}))])]:t._e(),"1"===e.display&&"goldCoin"===e.frontType?[i("div",{key:s,staticClass:"block gold-coin"},[i("div",{staticClass:"titleLine"},[i("span",{staticClass:"title"},[t._v(t._s(e.moduleTitle))]),e.moduleUrl?i("span",{staticClass:"more",on:{click:function(s){t.fakeA(e.moduleUrl,"goldCoin","moduleTitle")}}},[t._v(t._s(e.moduleSubTitle))]):t._e()]),i("div",{staticClass:"block-content"},[i("div",{staticClass:"coin-content"},[i("div",{staticClass:"coin-in"},[i("ul",{key:s,staticClass:"coin-list"},t._l(t.coinList,function(e,s){return i("coin-item",{key:s,attrs:{info:e,clstag:"jr|keycount|mf_goldCoin|"+t.info.id},on:{excgCoupon:t.willExcg,click:function(e){t.sendPoint("goldCoin",t.info.id)}}})}))])]),i("div",{staticClass:"coin-info"},[i("span",{staticClass:"coin-my",attrs:{clstag:"jr|keycount|mf_goldCoin|look"},on:{click:t.goMyGoldCoin}},[t._v("我的金币："+t._s(t.myGoldCoinCount))]),i("span",{staticClass:"coin-more"},[i("div",{staticClass:"text",attrs:{clstag:"jr|keycount|mf_goldCoin|show"},on:{click:t.showCoinTask}},[t._v("做任务赚金币，领更多豪礼 >")]),t.isMoreGoldCoin?i("div",{staticClass:"icon-getCoin"}):t._e()])])])])]:t._e()]})],2),i("div",{staticClass:"dataLiehu",attrs:{id:"dataLiehu"}},[i("div",{staticClass:"blockTitle"},[t._v("优惠商家")]),i("div",{staticClass:"dataLiehuIn"},[i("div",{staticClass:"addressLine",attrs:{id:"focusSpan"}},[i("span",{staticClass:"icon_address"}),i("span",{staticClass:"addressTxt"},[t._v(t._s(t.curPosInfo))])]),i("div",{attrs:{id:"storeBlock"}},[i("ul",{staticClass:"storeList"},t._l(t.shopList,function(t,e){return i("shop-item",{key:e,attrs:{info:t}})}))])]),t.pagination.index>1&&!t.isNoMoreShopData&&t.isQueryingLiehu?i("div",{staticClass:"loading-line"},[i("Loading",{attrs:{type:"spinner"}})],1):t._e(),2!==t.pagination.index||t.isQueryingLiehu||t.isListenScroll||t.isNoMoreShopData||t.noShopData?t._e():i("div",{staticClass:"loadMore",attrs:{id:"loadMore",clstag:"jr|keycount|mf_shop|more"},on:{click:t.clickLoadMore}},[i("p",[t._v("点击查看更多")]),i("span")]),t.isNoMoreShopData&&!t.noShopData?i("div",{staticClass:"noMore"},[t._v("没有更多商户了")]):t._e(),t.noShopData?i("div",{staticClass:"noData"},[i("img",{attrs:{src:"//img30.360buyimg.com/jr_image/jfs/t1/25366/37/11324/7602/5c8ef993E5fc6c134/8f4e6beda537273e.png"}}),i("div",{staticClass:"desc"},[t._v("未找到您附近的优惠商户~")])]):t._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"hiddenInput",staticClass:"hidden-input",attrs:{type:"text",id:"hiddenInput"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSearch,expression:"isShowSearch"}],staticClass:"addressBlock",attrs:{id:"addressBlock"}},[i("div",{staticClass:"mask"}),i("div",{staticClass:"addressContent",attrs:{id:"addressContent"}},[i("div",{staticClass:"dialogClose",attrs:{id:"dialogClose"},on:{click:t.searchCancel}},[t._v("取消")]),i("div",{staticClass:"topLine",attrs:{id:"topLine"}},[i("span",{staticClass:"cityBlock",on:{click:function(e){t.searchStatus=0}}},[i("span",{staticClass:"cityTxt"},[t._v(t._s(t.curCityInfo.subTitle))]),i("span",{staticClass:"icon_downArrow"})]),i("span",{staticClass:"searchBlock"},[(t.searchText.length,i("span",{staticClass:"placeHolder",on:{click:t.autoFocus}},[i("span",{staticClass:"icon_dot"})])),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",staticClass:"searchInput",attrs:{type:"search",id:"searchInput",placeholder:"选择城市、小区、写字楼、学校"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),i("span",{staticClass:"icon_search"})])]),0===t.searchStatus?i("div",{staticClass:"addressCityBlock dialogBlock"},[i("ul",{staticClass:"cityList"},[t._l(t.cityInfoArr,function(e,s){return[i("li",{directives:[{name:"show",rawName:"v-show",value:e.ext!==t.curCityInfo.ext,expression:"item.ext !== curCityInfo.ext"}],key:s,staticClass:"cityItem",attrs:{"data-clickkey":"","data-name":"北京"},on:{click:function(s){t.willChangeCity(e)}}},[t._v(t._s(e.title))])]})],2)]):1===t.searchStatus?i("div",{staticClass:"addressSearchBlock dialogBlock"},[i("ul",{staticClass:"searchList"},[t._l(t.searchResList,function(e,s){return[s<5?i("li",{key:s,staticClass:"searchItem",on:{click:function(s){t.confirmAddress(e)}}},[i("div",{staticClass:"addressName"},[t._v(t._s(e.name||""))]),i("div",{staticClass:"addressDetail"},[t._v(t._s(e.address||""))])]):t._e()]})],2)]):2===t.searchStatus&&t.searchHistoryList.length?i("div",{staticClass:"historySearchBlock dialogBlock"},[i("div",{staticClass:"historyLine"},[i("span",{staticClass:"historyTxt_left"},[t._v("历史记录")]),i("span",{staticClass:"historyTxt_right",on:{click:function(e){t.handleLocalStorage("clear")}}},[t._v("清除历史记录")])]),i("ul",{staticClass:"searchList"},t._l(t.searchHistoryList,function(e,s){return i("li",{key:s,staticClass:"searchItem",on:{click:function(s){t.confirmAddress(e)}}},[i("div",{staticClass:"addressName"},[t._v(t._s(e.name||""))]),i("div",{staticClass:"addressDetail"},[t._v(t._s(e.address||""))])])}))]):t._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDialog,expression:"isShowDialog"}],staticClass:"full-mask"},[i("transition",{attrs:{name:"scale1"}},[1===t.dialogStatus?i("div",{staticClass:"dialog"},[i("span",{staticClass:"close",on:{click:t.closeDialog}}),i("div",{staticClass:"content modal"},[i("div",{staticClass:"info-content"},[i("span",[t._v("确定使用"+t._s(t.currentCouponInfo.amount)+"金币，兑换"+t._s(t.currentCouponInfo.name)+"？")])]),i("div",{staticClass:"btn-line"},[i("button",{staticClass:"cancel",on:{click:t.closeDialog}},[t._v("取消")]),i("button",{staticClass:"confirm",on:{click:t.doGoldCoinExcg}},[t._v("兑换")])])])]):t._e(),2===t.dialogStatus?i("div",{staticClass:"dialog"},[i("span",{staticClass:"close",on:{click:t.closeDialog}}),i("div",{staticClass:"content task"},[i("div",{staticClass:"content-in"},[i("ul",{staticClass:"task-list"},t._l(t.coinTaskList,function(e,s){return i("task-item",{key:s,attrs:{info:e},on:{getTask:t.getTask,getReward:t.getReward}})}))])])]):t._e(),3===t.dialogStatus?i("div",{staticClass:"dialog popup"},[i("img",{attrs:{src:t.popupData.imageUrl},on:{click:function(e){t.fakeA(t.popupData.jumpUrl,t.popupData.trackId)}}}),i("span",{staticClass:"popup-close",on:{click:t.closeDialog}})]):t._e()])],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"useTips"},[i("div",{staticClass:"title"},[i("div",{staticClass:"titleBg"},[t._v("TIPS")]),i("div",{staticClass:"titleTxt"},[t._v("使用小技巧")])]),i("div",{staticClass:"qr"},[i("span",{staticClass:"img"},[i("img",{attrs:{src:s("5pYQ")}})]),i("span",{staticClass:"txt"},[i("p",{staticClass:"title"},[t._v("付款码")]),i("p",{staticClass:"desc"},[t._v("出示给收银员")]),i("p",{staticClass:"desc"},[t._v("扫描成功完成支付")])])]),i("div",{staticClass:"scan"},[i("span",{staticClass:"txt"},[i("p",{staticClass:"title"},[t._v("扫一扫")]),i("p",{staticClass:"desc"},[t._v("扫描京东支付二维码")]),i("p",{staticClass:"desc"},[t._v("确认金额")]),i("p",{staticClass:"desc"},[t._v("点击立即支付")])]),i("span",{staticClass:"img"},[i("img",{attrs:{src:s("82ZZ")}})])]),i("div",{staticClass:"notice"},[i("p",[t._v("*支持京东APP/京东金融APP")]),i("p",[t._v("有银联标识场景门店都可使用")])])])}],o=(s("xfY5"),s("SRfc"),s("KKXr"),s("OG14"),s("f3/d"),s("91GP"),s("rGqo"),s("iv4g")),r=(s("ls82"),s("MECJ")),c=(s("pIFo"),s("H7qB")),u=s("uXAG"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"storeItem",attrs:{"data-storecode":"${item.storeCode}",clstag:"jr|keycount|mf_shop|"+t.info.storeCode},on:{click:function(e){t.goMap(t.info.storeCode)}}},[s("span",{staticClass:"storeLogo"},[s("img",{attrs:{src:t.info.logoAddress}})]),s("span",{staticClass:"storeTxt"},[s("div",{staticClass:"storeName"},[t._v(t._s(t.info.realName))]),s("div",{staticClass:"storeBenefit"},[t._v(t._s(t.info.preferenceActivities&&t.info.preferenceActivities[0]&&t.info.preferenceActivities[0].prizeDesc||""))])]),s("span",{staticClass:"storeDistance"},[s("span",{staticClass:"icon_distance"}),s("span",{staticClass:"distanceTxt"},[t._v(t._s(t.info.distance)+t._s(t.info.distanceUnit))])])])},d=[],p={name:"",props:{info:{type:Object,default:function(){return{}}}},components:{},data:function(){return{}},filters:{},created:function(){},mounted:function(){},methods:{goMap:function(t){this.$emit("sendPoint","liehuDetail"),setTimeout(function(){location.href="https://pb.jd.com/activity/2018/location/html/map.html?storeCode="+t},300)},href:function(t){this.$emit("sendPoint","daojiaDetail"),setTimeout(function(){location.href=t},300)}}},f=p,h=(s("SRJC"),s("KHd+")),m=Object(h["a"])(f,l,d,!1,null,"6e4c4ce4",null),g=m.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"coin-item"},[s("div",{staticClass:"item-top"},[s("img",{staticClass:"coupon",attrs:{src:t.info.imageUrl}}),t.info.ext2?s("img",{staticClass:"icon",attrs:{src:t.info.ext2}}):t._e()]),s("div",{staticClass:"item-bottom"},[s("span",{staticClass:"amount"},[t._v(t._s(t.info.amount))]),t.excgStatusMap[t.info.exchangeStatus]?s("button",{class:[{red:1===t.info.exchangeStatus}],on:{click:function(e){t.excgCoupon(t.info.exchangeStatus)}}},[t._v(t._s(t.excgStatusMap[t.info.exchangeStatus]))]):s("button",[t._v("已抢光")])])])},C=[],y={name:"",props:{info:{type:Object,default:function(){return{}}}},components:{},data:function(){return{excgStatusMap:{0:"已兑换",1:"立即兑换",3:"已抢光",4:"等级不足"}}},watch:{},filters:{},created:function(){},mounted:function(){},methods:{excgCoupon:function(t){if(1!==t)return!1;this.$emit("excgCoupon",this.info)}}},_=y,k=(s("bIjt"),Object(h["a"])(_,v,C,!1,null,"d655d0fa",null)),b=k.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"task-item"},[s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(t.info.taskName))]),s("div",[t.info.rewardOneDesc?s("span",{staticClass:"icon-one reward"},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:t.info.rewardOneIcon}})]),s("span",{staticClass:"amount"},[t._v(t._s(t._f("getAmount")(t.info.rewardOneDesc)))]),t.info.rewardOneMultiple?s("span",{staticClass:"double"},[t._v("x 2")]):t._e()]):t._e(),t.info.rewardTwoDesc?s("span",{staticClass:"reward"},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:t.info.rewardTwoIcon}})]),s("span",{staticClass:"amount"},[t._v(t._s(t._f("getAmount")(t.info.rewardTwoDesc)))]),t.info.rewardMulTwotiple?s("span",{staticClass:"double"},[t._v("x 2")]):t._e()]):t._e()])]),-1===t.info.status?s("button",{staticClass:"task",on:{click:t.getTask}},[t._v("领取任务")]):1===t.info.status?s("button",{staticClass:"reward",on:{click:t.getReward}},[t._v("领取奖品")]):2===t.info.status?s("button",[t._v("已完成")]):"getTask"===t.info.status?s("button",[t._v("已领取")]):0===t.info.status&&t.info.scheduleTask?s("button",[t._v(t._s(t.info.scheduleNowValue)+"/"+t._s(t.info.scheduleTargetValue))]):0!==t.info.status||t.info.scheduleTask?t._e():s("button",[t._v("已领取")])])},x=[],S={name:"",props:{info:{type:Object,default:function(){return{}}}},components:{},data:function(){return{statusMap:{getTask:"已领取","-1":"领取任务",0:"进行中",1:"领取奖品",2:"已完成"}}},watch:{},filters:{getAmount:function(t){return parseInt(t)}},created:function(){},mounted:function(){},methods:{getTask:function(){this.$emit("getTask",this.info.missionId)},getReward:function(){this.$emit("getReward",this.info.missionId)}}},T=S,I=(s("94WD"),Object(h["a"])(T,w,x,!1,null,"5e1977c2",null)),L=I.exports,j=s("8ujH"),M=s.n(j),D=s("Qyje"),O=s.n(D);function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(s,i){var n=t,a=O.a.stringify(e),o=(new Date).getTime();M()(n+"?v="+o+"&"+a,function(t,e){return t?i(t):e?"010000"===e.code?(window.location.href="//plogin.m.jd.com/user/login.action?appid=579&returnurl="+encodeURIComponent(window.location.href),!1):s(e):void 0})})}var U=s("yT7P"),A=s("vDqi"),R=s.n(A),E="//lbspayapi.jd.com",G="https://api.map.baidu.com",N="//payhome.jd.com",$=E+"/omm/ml.htm",H=G+"/reverse_geocoding/v3/",F=N+"/my/api/codepayStatus",B=N+"/my/api/moduleData",Q=N+"/my/api/payRightsCenter/acceptMission",V=N+"/my/api/payRightsCenter/rewardMission",q="/my/api/quickpay/goldCoinMallAndTask",J="/my/api/quickpay/goldCoinExchange";function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";s=s.toLowerCase();var i={};"post"===s&&(i={data:O.a.stringify(e)},t.indexOf("/omm/ml.htm")&&(i={data:e}));var n=Object(U["a"])({url:t},i,{method:s});return new Promise(function(t,e){var s=R.a.create({baseURL:N,timeout:3e4,withCredentials:!0,crossDomain:!0});s(n).then(function(e){var s=e.data;return t(s)}).catch(function(t){if(t.response){var s=t.status,i=t.message,n={code:s,respMsg:i};return e(n)}var a={type:"canceled",respMsg:"数据请求超时"};return e(a)})})}var K=function(t){return z($,t,"post")},Y=function(t){return P(H,t,"get")},X=function(t){return P(F,t,"get")},W=function(t){return P(B,t,"get")},Z=function(t){return P(Q,t,"get")},tt=function(t){return P(V,t,"get")},et=function(t){return z(q,t,"post")},st=function(t){return z(J,t,"post")};s("a94B"),s("NO8f"),s("Oyvg");function it(t){var e=RegExp("[?&]"+t+"=([^&|#?]*)").exec(window.location.href);return e&&decodeURIComponent(e[1].replace(/\+/g," "))}var nt={getItem:function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,s,i,n,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var o="";if(s)switch(s.constructor){case Number:o=s===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+s;break;case String:o="; expires="+s;break;case Date:o="; expires="+s.toUTCString();break}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+o+(n?"; domain="+n:"")+(i?"; path="+i:"")+(a?"; secure":""),!0},removeItem:function(t,e,s){return!(!t||!this.hasItem(t))&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(s?"; domain="+s:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}};var at={name:"",components:{SwipeItem:u["c"],Swipe:u["b"],Loading:u["a"],ShopItem:g,CoinItem:b,TaskItem:L},data:function(){return{pagination:{index:1,size:10},lastTop:0,isShowDialog:!1,dialogStatus:0,isShowSearch:!1,searchStatus:2,isLoading:!0,isNewUser:!1,isGetUserPos:!1,isNoMoreShopData:!1,isQueryingLiehu:!1,noShopData:!1,isListenScroll:!1,geoPageStatus:0,curPos:{},curPosInfo:"",firstPosStatus:0,pageData:[],cityInfoArr:[],unConfirmCityInfo:{},curCityInfo:{},noticeArr:[],bannerArr:[],iconArr:[],rct3Arr:[],rct4Arr:[],popupData:{},shareInfo:{},clickKeyData:{},shopList:[],searchHistoryList:[],searchResList:[],historyMax:5,searchText:"",coinListRaw:[],coinList:[],coinTaskList:[],myGoldCoinCount:0,isMoreGoldCoin:!1,currentCouponInfo:{}}},created:function(){this.doQueryUserStatus(),this.getUserPos(),this.handleLocalStorage("init")},watch:{curPos:function(t){this.pagination.index=1,this.isNoMoreShopData=!1,this.noShopData=!1,this.doQueryShopList()},geoPageStatus:function(t,e){2===t&&this.setCurPos()},searchText:function(t){var e=t.replace(/(^\s*)|(\s*$)/g,"");e?this.searchAddress(e):this.searchStatus=2},isShowDialog:function(t){t?this.pageFixed():this.pageUnfixed()},isShowSearch:function(t){t?this.pageFixed():this.pageUnfixed()}},mounted:function(){this.keyboardFix()},methods:{getUserPos:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,it("latitude")&&it("longitude")?(this.curPos={lat:it("latitude"),lng:it("longitude")},this.isGetUserPos=!0,this.geoPageStatus++):(s=new window.BMap.Geolocation,s.getCurrentPosition(function(t){console.log("this.getStatus():",this.getStatus()),0===this.getStatus()?(e.isGetUserPos=!0,e.curPos={lat:t.point.lat,lng:t.point.lng}):(this.isGetUserPos=!1,Object(u["d"])("未获取到您的位置，请在‘设置’中开启定位功能")),e.geoPageStatus++},{enableHighAccuracy:!0}));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),doQueryUserStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,t.next=4,X();case 4:if(e=t.sent,this.isLoading=!1,"F_99999"!==e.code){t.next=9;break}return window.location.href="//plogin.m.jd.com/user/login.action?appid=579&returnurl="+encodeURIComponent(window.location.href),t.abrupt("return",!1);case 9:this.isNewUser=e.data.newUser,this.doQueryModuleData(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),this.isLoading=!1,Object(u["d"])("服务繁忙，请稍后再试！");case 17:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),doQueryModuleData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.isNewUser?"FKM_COUPON_NEWUSER":"FKM_COUPON",s={preview:!1,bussinessType:e},this.isLoading=!0,t.next=6,W(s);case 6:i=t.sent,console.log("taiRes:",i),i.success?this.renderPage(i.data):Object(u["d"])("服务繁忙，请稍后再试！"),this.geoPageStatus++,this.isLoading=!1,t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),this.geoPageStatus++,this.isLoading=!1,Object(u["d"])("服务繁忙，请稍后再试！");case 18:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),doQueryCityInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s={output:"json",coordtype:"bd09ll",ak:"gKgImcyCvlqHt5C3mGYFySeOwBaXOAr5",location:e.lat+","+e.lng},this.isLoading=!0,t.next=5,Y(s);case 5:i=t.sent,this.isLoading=!1,0===i.status&&(this.curPosInfo=i.result.formatted_address),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.isLoading=!1,Object(u["d"])("服务繁忙，请稍后再试！");case 14:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),doQueryShopList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isQueryingLiehu){t.next=2;break}return t.abrupt("return",!1);case 2:return e={latitude:this.curPos.lat,longitude:this.curPos.lng,userLatitude:this.curPos.lat,userLongitude:this.curPos.lng,pageIndex:this.pagination.index,pageSize:this.pagination.size,queryBizType:"1000",radius:"50000",fromS:it("p_id")},s={},t.prev=4,this.isQueryingLiehu=!0,t.next=8,K(e);case 8:s=t.sent,this.isQueryingLiehu=!1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),this.isQueryingLiehu=!1,Object(u["d"])("服务繁忙，请稍后再试！");case 16:"0"===s.resultCode&&s.resultData&&s.resultData.length?(1===this.pagination.index&&(this.shopList=[],s.resultData.length||(this.noShopData=!0)),(i=this.shopList).push.apply(i,Object(o["a"])(s.resultData)),s.resultData.length<this.pagination.size&&(this.isNoMoreShopData=!0)):this.isNoMoreShopData=!0,s.resultData||1!==this.pagination.index||(this.isNoMoreShopData=!0,this.noShopData=!0),this.pagination.index++;case 19:case"end":return t.stop()}},t,this,[[4,12]])}));return function(){return t.apply(this,arguments)}}(),doQueryGoldList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,i,n,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=[],s="",this.coinList.forEach(function(t,s){e.push(t.ext)}),s=e.join(","),i={plat:32,ids:s},t.next=8,et(i);case 8:n=t.sent,n.success&&(this.myGoldCoinCount=n.data.myGoldCoinCount,this.isMoreGoldCoin=n.data.redIcon,this.coinTaskList=n.data.tasks,n.data.productInfos&&function(){var t=n.data.productInfos,e=function(e){a.coinList.forEach(function(s,i){if(s.ext===e){var n=Object.assign({},s);n.name=t[e].name,n.amount=t[e].amount,n.exchangeStatus=t[e].exchangeStatus,a.$set(a.coinList,i,n)}})};for(var s in t)e(s)}()),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),doGoldCoinExcg:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.closeDialog(),t.prev=1,e={id:this.currentCouponInfo.ext},t.next=5,st(e);case 5:s=t.sent,"F_000000"===s.code?(Object(u["d"])("兑换成功"),this.goldCoinExcgSucc()):Object(u["d"])(s.msg||"活动火爆，请稍后再试"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0),Object(u["d"])("活动火爆，请稍后再试");case 13:case"end":return t.stop()}},t,this,[[1,9]])}));return function(){return t.apply(this,arguments)}}(),doGetTask:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s={missionId:e},t.next=4,Z(s);case 4:i=t.sent,"F_000000"===i.code?(Object(u["d"])("任务领取成功"),this.getTaskSucc(e)):Object(u["d"])(i.msg||"活动火爆，请稍后再试"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),Object(u["d"])("活动火爆，请稍后再试");case 12:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),doGetReward:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s={missionId:e},t.next=4,tt(s);case 4:i=t.sent,"F_000000"===i.code?(Object(u["d"])("领取奖励成功"),this.getRewardSucc(e)):Object(u["d"])(i.msg||"活动火爆，请稍后再试"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),Object(u["d"])("活动火爆，请稍后再试");case 12:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),searchAddress:function(t){var e=this,s=new qq.maps.SearchService({complete:function(t){t.detail.pois&&(e.searchStatus=1,e.searchResList=t.detail.pois)},error:function(t){e.searchStatus=2,e.searchResList=[],Object(u["d"])("无搜索结果"),console.log(t)}});this.curCityInfo.subTitle?(s.setLocation(this.curCityInfo.subTitle),s.search(t)):Object(u["d"])("请先选择城市")},renderPage:function(t){var e=this;this.pageData=t,t.forEach(function(t,s){var i=t.frontType,n=t.display;if("mf_01"===i&&"1"===n&&(e.noticeArr=t.moduleSubTitle.split("*"),e.bannerArr=t.subModuleVos,setTimeout(function(){e.noticeMove()},100)),"mf_02"===i&&"1"===n&&(e.iconArr=t.subModuleVos),"mf_04"===i&&"0"===n){var a=[];t.subModuleVos.forEach(function(t,e){var s={textArr:[]},i=t.subTitle,n=i.indexOf("*"),o=i.lastIndexOf("*"),r="",c="";-1!==n?0===n?(c=i.substr(1,o-1),r=i.substr(o+1,2),s.textArr.push({status:1,text:c}),s.textArr.push({status:0,text:r})):(r=i.substr(0,n),c=i.substr(n+1,o-n-1),s.textArr.push({status:0,text:r}),s.textArr.push({status:1,text:c})):(r=i,s.textArr.push({status:0,text:r})),s.imageUrl=t.imageUrl,s.jumpUrl=t.jumpUrl,s.title=t.title,s.id=t.id,s.moduleTitle=t.moduleTitle,a.push(s)}),e.rct4Arr=a}if("mf_05"===i&&"1"===n){var o=[];t.subModuleVos.forEach(function(t,e){var s={imageUrl:t.imageUrl,title:t.title,jumpUrl:t.jumpUrl,id:t.id};o.push(s)}),e.rct3Arr=o}if("1"===n&&"goldCoin"===i&&(e.coinList=t.subModuleVos,e.doQueryGoldList()),"popup"===i&&"1"===n){var r=!1,c=(new Date).getFullYear()+"-"+(new Date).getMonth()+"-"+(new Date).getDate(),u=nt.getItem("jdFeCodepayPop");u&&u===c||(r=!0,nt.setItem("jdFeCodepayPop",c)),e.popupData={isShow:r,imageUrl:t.subModuleVos[0].imageUrl,jumpUrl:t.subModuleVos[0].jumpUrl,trackId:t.subModuleVos[0].id},r&&(e.isShowDialog=!0,e.dialogStatus=3)}"cityInfo"===i&&(e.cityInfoArr=t.subModuleVos),"shareInfo"===i&&(e.shareInfo={title:t.subModuleVos[0].title,desc:t.subModuleVos[0].subTitle,logo:t.subModuleVos[0].imageUrl},e.setShare()),"clickKey"===i&&(e.clickKeyData={pageId:t.subModuleVos[0].title,pageBiz:t.subModuleVos[0].subTitle,btnBiz:t.subModuleVos[0].ext})}),setTimeout(function(){e.coinListScrollInit()},100)},setCurPos:function(){this.isGetUserPos||(this.curPos={lat:this.cityInfoArr[0].ext2,lng:this.cityInfoArr[0].ext3}),this.doQueryCityInfo(this.curPos)},willChangeCity:function(t){this.curCityInfo=t,this.searchStatus=2},confirmAddress:function(t){console.log("confirmData:",t),this.unConfirmCityInfo=this.curCityInfo,this.curPosInfo=t.address,this.curPos={lat:t.latLng.lat,lng:t.latLng.lng},this.handleLocalStorage("add",t),this.searchCancel()},searchCancel:function(){this.isShowSearch=!1,this.searchStatus=2,this.searchText="",this.searchResList=[],this.curCityInfo=this.unConfirmCityInfo;var t=this.$el.querySelector("#dataLiehu"),e=t.offsetTop;document.body&&document.body.scrollTop&&(document.body.scrollTop=e),document.documentElement&&document.documentElement.scrollTop&&(document.documentElement.scrollTop=e),console.log("target",e)},autoFocus:function(){this.$refs.searchInput.focus()},autoFocusDelay:function(){var t=this;setTimeout(function(){t.$refs.searchInput.focus()},200)},autoFocusListen:function(){var t=window.navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!e)return!1;var s=document.getElementById("focusSpan"),i=document.getElementById("hiddenInput");s.addEventListener("click",function(){i.focus()})},clickLoadMore:function(){this.doQueryShopList(),this.listenScroll()},pageFixed:function(){this.lastTop=document.body.scrollTop||document.documentElement.scrollTop,document.body.setAttribute("style","overflow: hidden; position: fixed"),document.documentElement.scrollTop=document.body.scrollTop=0},pageUnfixed:function(){document.body.setAttribute("style","overflow: auto; position: relative"),document.documentElement.scrollTop=document.body.scrollTop=this.lastTop,this.lastTop=0},keyboardFix:function(){var t=this;document.addEventListener("touchstart",function(e){t.$refs.searchInput.blur(),t.$refs.hiddenInput.blur()},!1)},listenScroll:function(){var t=this;if(2!==this.pagination.index)return!1;window.onscroll=function(){t.isListenScroll=!0;var e=document.documentElement.offsetHeight-document.documentElement.scrollTop-window.innerHeight<=10,s=document.body.offsetHeight-document.body.scrollTop-window.innerHeight<=10;(e||s)&&!1===t.isQueryingLiehu&&!1===t.isNoMoreShopData&&t.doQueryShopList()}},goldCoinExcgSucc:function(){var t=this,e=this.currentCouponInfo.amount;this.myGoldCoinCount=Number(this.myGoldCoinCount)-Number(e),this.coinList.forEach(function(e,s){if(e.ext===t.currentCouponInfo.ext){var i=Object.assign({},e);i.name=t.currentCouponInfo.name,i.amount=t.currentCouponInfo.amount,i.exchangeStatus=0,t.$set(t.coinList,s,i)}})},getTaskSucc:function(t){var e=this;this.coinTaskList.forEach(function(s,i){if(s.missionId===t){var n=Object.assign({},s);n.status="getTask",e.$set(e.coinTaskList,i,n)}})},getRewardSucc:function(t){var e=this;this.coinTaskList.forEach(function(s,i){if(s.missionId===t){e.myGoldCoinCount=Number(e.myGoldCoinCount)+parseInt(s.rewardOneDesc);var n=Object.assign({},s);n.status=2,e.$set(e.coinTaskList,i,n)}})},goMyGoldCoin:function(){this.sendPoint("goldCoin","lookMyGoldCoin"),setTimeout(function(){location.href="//m.jr.jd.com/member/gcmall/#/mine?channel=01-sffp"},300)},willExcg:function(t){this.currentCouponInfo=t,this.isShowDialog=!0,this.dialogStatus=1},getTask:function(t){this.doGetTask(t)},getReward:function(t){this.doGetReward(t)},showCoinTask:function(){var t=this;this.isShowDialog=!0,this.dialogStatus=2,this.$nextTick(function(){t.taskListScrollInit()})},closeDialog:function(){var t=this;this.dialogStatus=0,setTimeout(function(){t.isShowDialog=!1},300)},fakeA:function(t,e,s){this.sendPoint(e,s),setTimeout(function(){location.href=t},300)},sendPoint:function(t,e){var s="JR,FE,CODEPAY",i="oldUser";this.isNewUser&&(i="newUser"),t||(t="default"),e||(e="default"),JPTrack.emit(s,[i,t,e])},noticeMove:function(){var t=this.$refs.noticeList[0],e=this.$refs.notice[0].clientHeight,s=this.$refs.noticeList[0].clientHeight,i=Math.round(s/e),n=0;function a(){n===i?(n=0,t.setAttribute("style","transition: initial; top: "+-e*n+"px"),n++,setTimeout(a,1400)):(t.setAttribute("style","transition: all 1s ease; top: "+-e*n+"px"),n++,setTimeout(a,1400))}a()},handleLocalStorage:function(t,e){var s=this;if("init"===t&&localStorage.getItem("codePay_searchHistory")){var i=localStorage.getItem("codePay_searchHistory");i=JSON.parse(i),i.forEach(function(t,e){s.searchHistoryList.push(t)})}if("add"===t){var n=!1;if(this.searchHistoryList.length>0&&this.searchHistoryList.forEach(function(t,s){if(t.id===e.id)return n=!0,!1}),n)return!1;this.searchHistoryList.length>=this.historyMax&&this.searchHistoryList.pop(),this.searchHistoryList.unshift(e),localStorage.setItem("codePay_searchHistory",JSON.stringify(this.searchHistoryList))}"clear"===t&&(this.searchHistoryList=[],localStorage.setItem("codePay_searchHistory",JSON.stringify(this.searchHistoryList)))},taskListScrollInit:function(){var t=document.querySelector(".content-in"),e=new c["a"](t);console.log(e)},coinListScrollInit:function(){var t=document.querySelector(".coin-in");if(t){var e=new c["a"](t,{scrollX:!0});console.log(e)}},setShare:function(){var t=this.shareInfo.title,e=this.shareInfo.desc,s=this.shareInfo.logo,i={moreItem:!0,share_img:s,share_url:location.href,share_title:t,share_subtitle:e,channels:["1","2","3","4","5"]};window.JPFESDK.setShare(i)}}},ot=at,rt=(s("285Y"),Object(h["a"])(ot,n,a,!1,null,"10e43c4f",null)),ct=rt.exports,ut=s("L2JU");i["a"].use(ut["a"]);var lt=new ut["a"].Store({state:{},mutations:{},actions:{}});s("FXp9"),s("J19P");i["a"].config.productionTip=!1,i["a"].use(u["e"]),new i["a"]({store:lt,render:function(t){return t(ct)}}).$mount("jdjr-div")},"5pYQ":function(t,e,s){t.exports=s.p+"static/img/show_qr.ec75896e.png"},"82ZZ":function(t,e,s){t.exports=s.p+"static/img/show_scan.95fc09c4.png"},"94WD":function(t,e,s){"use strict";var i=s("RLMS"),n=s.n(i);n.a},J19P:function(t,e,s){},"MS/G":function(t,e,s){t.exports=s.p+"static/img/btn_open.9b1d7893.png"},RLMS:function(t,e,s){},SRJC:function(t,e,s){"use strict";var i=s("y8mC"),n=s.n(i);n.a},WHHR:function(t,e,s){},bIjt:function(t,e,s){"use strict";var i=s("2sjv"),n=s.n(i);n.a},y8mC:function(t,e,s){}});
//# sourceMappingURL=page1.25b9b940.js.map